!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/observable/fromEvent"),require("rxjs/observable/merge"),require("rxjs/add/operator/map"),require("@angular/core"),require("@angular/common/http"),require("rxjs/Subject"),require("rxjs/add/operator/takeUntil"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","rxjs/observable/fromEvent","rxjs/observable/merge","rxjs/add/operator/map","@angular/core","@angular/common/http","rxjs/Subject","rxjs/add/operator/takeUntil","@angular/platform-browser"],t):t(e.ng2AdskForgeViewer=e.ng2AdskForgeViewer||{},e.Rx.Observable,e.Rx.Observable,e.Rx.Observable.prototype,e.ng.core,e.ng["common-http"],e.Rx,e.Rx.Observable.prototype,e.ng["platform-browser"])}(this,function(e,r,t,n,i,o,s,u,a){"use strict";var p,E,c=(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,e}return c(e,t),e}(l),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.ANIMATION_READY_EVENT,e}return c(e,t),e}(l),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.CAMERA_CHANGE_EVENT,e}return c(e,t),e}(l),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.CUTPLANES_CHANGE_EVENT,e}return c(e,t),e}(l),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.ESCAPE_EVENT,e}return c(e,t),e}(l),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.EXPLODE_CHANGE_EVENT,e}return c(e,t),e}(l),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(l),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.EXTENSION_LOADED_EVENT,e}return c(e,t),e}(y),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.EXTENSION_UNLOADED_EVENT,e}return c(e,t),e}(y),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT,e}return c(e,t),e}(l),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.FIT_TO_VIEW_EVENT,e}return c(e,t),e}(l),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.FRAGMENTS_LOADED_EVENT,e}return c(e,t),e}(l),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.FULLSCREEN_MODE_EVENT,e}return c(e,t),e}(l),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.GEOMETRY_LOADED_EVENT,e}return c(e,t),e}(l),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.HIDE_EVENT,e}return c(e,t),e}(l),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.HYPERLINK_EVENT,e}return c(e,t),e}(l),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.ISOLATE_EVENT,e}return c(e,t),e}(l),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT,e}return c(e,t),e}(l),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.LOAD_MISSING_GEOMETRY,e}return c(e,t),e}(l),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,e}return c(e,t),e}(l),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.MODEL_UNLOADED_EVENT,e}return c(e,t),e}(l),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,e}return c(e,t),e}(l),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(l),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,e}return c(e,t),e}(M),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT,e}return c(e,t),e}(M),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(l),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.PREF_CHANGED_EVENT,e}return c(e,t),e}(P),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.PREF_RESET_EVENT,e}return c(e,t),e}(P),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.PROGRESS_UPDATE_EVENT,e}return c(e,t),e}(l),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,e}return c(e,t),e}(l),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.RENDER_PRESENTED_EVENT,e}return c(e,t),e}(l),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.RESET_EVENT,e}return c(e,t),e}(l),W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT,e}return c(e,t),e}(l),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.SELECTION_CHANGED_EVENT,e}return c(e,t),e}(l),q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.SHOW_EVENT,e}return c(e,t),e}(l),X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.TEXTURES_LOADED_EVENT,e}return c(e,t),e}(l),J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.TOOL_CHANGE_EVENT,e}return c(e,t),e}(l),Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.VIEWER_INITIALIZED,e}return c(e,t),e}(l),K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.VIEWER_RESIZE_EVENT,e}return c(e,t),e}(l),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,e}return c(e,t),e}(l),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Autodesk.Viewing.VIEWER_UNINITIALIZED,e}return c(e,t),e}(l),ee=function(){function e(e,t){this.viewer=void 0,this.extOptions=void 0,this.eventArgsTypeMap={},this.viewer=e,this.extOptions=t,this.registerEventTypes()}return e.registerExtension=function(e,t){Autodesk.Viewing.theExtensionManager.registerExtension(e,t)},e.unregisterExtension=function(e){Autodesk.Viewing.theExtensionManager.unregisterExtension(e)},e.prototype.registerEventTypes=function(){this.eventArgsTypeMap[Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT]=h,this.eventArgsTypeMap[Autodesk.Viewing.ANIMATION_READY_EVENT]=d,this.eventArgsTypeMap[Autodesk.Viewing.CAMERA_CHANGE_EVENT]=g,this.eventArgsTypeMap[Autodesk.Viewing.CUTPLANES_CHANGE_EVENT]=A,this.eventArgsTypeMap[Autodesk.Viewing.ESCAPE_EVENT]=v,this.eventArgsTypeMap[Autodesk.Viewing.EXPLODE_CHANGE_EVENT]=f,this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_LOADED_EVENT]=T,this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_UNLOADED_EVENT]=w,this.eventArgsTypeMap[Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT]=V,this.eventArgsTypeMap[Autodesk.Viewing.FIT_TO_VIEW_EVENT]=_,this.eventArgsTypeMap[Autodesk.Viewing.FRAGMENTS_LOADED_EVENT]=N,this.eventArgsTypeMap[Autodesk.Viewing.FULLSCREEN_MODE_EVENT]=m,this.eventArgsTypeMap[Autodesk.Viewing.GEOMETRY_LOADED_EVENT]=O,this.eventArgsTypeMap[Autodesk.Viewing.HIDE_EVENT]=b,this.eventArgsTypeMap[Autodesk.Viewing.HYPERLINK_EVENT]=k,this.eventArgsTypeMap[Autodesk.Viewing.ISOLATE_EVENT]=I,this.eventArgsTypeMap[Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT]=D,this.eventArgsTypeMap[Autodesk.Viewing.LOAD_MISSING_GEOMETRY]=S,this.eventArgsTypeMap[Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT]=R,this.eventArgsTypeMap[Autodesk.Viewing.MODEL_UNLOADED_EVENT]=L,this.eventArgsTypeMap[Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT]=C,this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT]=x,this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT]=G,this.eventArgsTypeMap[Autodesk.Viewing.PREF_CHANGED_EVENT]=j,this.eventArgsTypeMap[Autodesk.Viewing.PREF_RESET_EVENT]=F,this.eventArgsTypeMap[Autodesk.Viewing.PROGRESS_UPDATE_EVENT]=H,this.eventArgsTypeMap[Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT]=U,this.eventArgsTypeMap[Autodesk.Viewing.RENDER_PRESENTED_EVENT]=B,this.eventArgsTypeMap[Autodesk.Viewing.RESET_EVENT]=z,this.eventArgsTypeMap[Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT]=W,this.eventArgsTypeMap[Autodesk.Viewing.SELECTION_CHANGED_EVENT]=Y,this.eventArgsTypeMap[Autodesk.Viewing.SHOW_EVENT]=q,this.eventArgsTypeMap[Autodesk.Viewing.TEXTURES_LOADED_EVENT]=X,this.eventArgsTypeMap[Autodesk.Viewing.TOOL_CHANGE_EVENT]=J,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_INITIALIZED]=Z,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_RESIZE_EVENT]=K,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT]=Q,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_UNINITIALIZED]=$},e.prototype.castArgs=function(e){if(Array.isArray(e))return e.map(this.castArgs);if(!e||"object"!=typeof e||!e.hasOwnProperty("type"))return e;for(var t=this.eventArgsTypeMap[e.type],n=Object.create(t.prototype),i=0,r=Object.keys(e);i<r.length;i++){var o=r[i];n[o]=this.castArgs(e[o])}return n},e.extensionName="",e}(),te=(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ne=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.eventStreams=[],e.events=[Autodesk.Viewing.FIT_TO_VIEW_EVENT,Autodesk.Viewing.FULLSCREEN_MODE_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,Autodesk.Viewing.HIDE_EVENT,Autodesk.Viewing.ISOLATE_EVENT,Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT,Autodesk.Viewing.RESET_EVENT,Autodesk.Viewing.SELECTION_CHANGED_EVENT,Autodesk.Viewing.SHOW_EVENT],e}return te(i,n),i.registerExtension=function(e,t){i.callback=t,n.registerExtension.call(this,i.extensionName,i)},i.prototype.load=function(){var n=this;return this.events.forEach(function(e){var t=r.fromEvent(n.viewer,e).map(function(e){return n.castArgs(e)});n.eventStreams.push(t)}),this.viewerEvents=t.merge.apply(void 0,this.eventStreams),i.debugMessages&&console.log(i.extensionName,"loaded!"),i.callback&&i.callback(this),!0},i.prototype.unload=function(){return this.eventStreams=[],this.viewerEvents=void 0,i.debugMessages&&console.log(i.extensionName,"unloaded!"),!0},i.extensionName="BasicExtension",i.debugMessages=!1,i.callback=null,i}(ee),ie=function(){function e(){this.scripts={}}return e.prototype.load=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=[];return e.forEach(function(e){if(!t.scripts[e]||!t.scripts[e].loaded)return t.scripts[e]={src:e,loaded:!1},i.push(t.loadScript(e))}),Promise.all(i)},e.prototype.loadScript=function(i){var r=this;return new Promise(function(t,e){if(r.scripts[i]&&r.scripts[i].loaded)t({src:i,loaded:!0,status:"Already Loaded"});else{var n=document.createElement("script");n.type="text/javascript",n.src=r.scripts[i].src,n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,r.scripts[i].loaded=!0,t({src:i,loaded:!0,status:"Loaded"}))}:n.onload=function(){r.scripts[i].loaded=!0,t({src:i,loaded:!0,status:"Loaded"})},n.onerror=function(e){return t({src:i,loaded:!1,status:"Loaded"})},document.getElementsByTagName("head")[0].appendChild(n)}})},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}(),re=function(o,s,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{r(a.next(e))}catch(e){t(e)}}function i(e){try{r(a.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,i)}r((a=a.apply(o,s||[])).next())})},oe=function(n,i){var r,o,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(s=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=i.call(n,u)}catch(e){t=[6,e],o=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},se=function(){function t(e){this.script=e,this.containerId="ng2-adsk-forge-viewer-container",this.onDocumentChanged=new i.EventEmitter,this.onItemLoaded=new i.EventEmitter,this.onError=new i.EventEmitter,this.onFitToView=new i.EventEmitter,this.onFullscreen=new i.EventEmitter,this.onGeometryLoaded=new i.EventEmitter,this.onHide=new i.EventEmitter,this.onIsolate=new i.EventEmitter,this.onObjectTreeCreated=new i.EventEmitter,this.onObjectTreeUnavailable=new i.EventEmitter,this.onReset=new i.EventEmitter,this.onSelectionChanged=new i.EventEmitter,this.onShow=new i.EventEmitter,this.showDebugMessages=!1,this._viewerOptions=null,this.viewerInitialized=!1,this.unsubscribe=new s.Subject}return t.verifyUrn=function(e){return e.startsWith("urn:")?e:"urn:"+e},Object.defineProperty(t.prototype,"viewerOptions",{get:function(){return this._viewerOptions},set:function(e){!this.viewerInitialized&&e&&(this._viewerOptions=e,this.initialiseApplication())},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){if(this.unregisterBasicExtension(),this.viewerApp){var e=this.viewerApp.getCurrentViewer();e&&(e.tearDown(),e.uninitialize())}this.viewerApp=null,this.viewerInitialized=!1,this.unsubscribe.next(),this.unsubscribe.complete()},t.prototype.getDefaultViewerOptions=function(e,t){return{initializerOptions:{env:"AutodeskProduction",getAccessToken:t},onViewingApplicationInitialized:e}},Object.defineProperty(t.prototype,"ViewerApplication",{get:function(){return this.viewerApp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Viewer3D",{get:function(){return this.viewerApp.getCurrentViewer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DocumentId",{get:function(){return this.documentId},set:function(e){this.documentId=e,this.loadDocument(this.documentId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicExtension",{get:function(){return this.basicExt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensionEvents",{get:function(){if(this.basicExt)return this.basicExt.viewerEvents},enumerable:!0,configurable:!0}),t.prototype.selectItem=function(e){this.viewerApp.selectItem(e,this.onItemLoadSuccess.bind(this),this.onItemLoadFail.bind(this))},t.prototype.loadScripts=function(){var t=this;return this.script.load("https://developer.api.autodesk.com/modelderivative/v2/viewers/viewer3D.min.js?v=6.5.*").then(function(e){t.log("script loaded ",e)}).catch(function(e){return t.error(e)})},t.prototype.initialiseApplication=function(){return re(this,void 0,void 0,function(){var t=this;return oe(this,function(e){switch(e.label){case 0:return[4,this.loadScripts()];case 1:return e.sent(),this.viewerOptions.onViewerScriptsLoaded&&this.viewerOptions.onViewerScriptsLoaded(),Autodesk.Viewing.Private.env?setTimeout(function(){t.initialized()}):Autodesk.Viewing.Initializer(this.viewerOptions.initializerOptions,function(){t.initialized()}),[2]}})})},t.prototype.initialized=function(){this.viewerApp=new Autodesk.Viewing.ViewingApplication(this.containerId,this.viewerOptions.viewerApplicationOptions);var e=this.registerBasicExtension(),t=this.addBasicExtensionConfig(e);this.viewerApp.registerViewer(this.viewerApp.k3D,this.viewerOptions.headlessViewer?Autodesk.Viewing.Viewer3D:Autodesk.Viewing.Private.GuiViewer3D,t),this.viewerInitialized=!0,this.viewerOptions.onViewingApplicationInitialized({viewingApplication:this.viewerApp,viewerComponent:this})},t.prototype.loadDocument=function(e){e&&this.viewerApp.loadDocument(t.verifyUrn(e),this.onDocumentLoadSuccess.bind(this),this.onDocumentLoadFailure.bind(this))},t.prototype.onDocumentLoadSuccess=function(e){if(this.viewerApp.bubble&&(this.onDocumentChanged.emit({document:e,viewingApplication:this.viewerApp,viewerComponent:this}),void 0===this.viewerOptions.showFirstViewable||this.viewerOptions.showFirstViewable)){var t=this.viewerApp.bubble.search(Autodesk.Viewing.BubbleNode.MODEL_NODE);t&&0<t.length&&this.viewerApp.selectItem(t[0].data,this.onItemLoadSuccess.bind(this),this.onItemLoadFail.bind(this))}},t.prototype.onDocumentLoadFailure=function(e){this.error("onDocumentLoadFailure() - errorCode:"+e),this.onError.emit(e)},t.prototype.onItemLoadSuccess=function(e,t){this.log("onItemLoadSuccess()",e,t),this.onItemLoaded.emit({item:t,currentViewer:e,viewingApplication:this.viewerApp,viewerComponent:this})},t.prototype.onItemLoadFail=function(e){this.error("onItemLoadFail() - errorCode:"+e),this.onError.emit(e)},t.prototype.registerBasicExtension=function(){return ne.registerExtension(ne.extensionName,this.extensionLoaded.bind(this)),ne.extensionName},t.prototype.extensionLoaded=function(e){var t=this;(this.basicExt=e).viewerEvents.takeUntil(this.unsubscribe).subscribe(function(e){t.log(e),e instanceof _?t.onFitToView.emit(e):e instanceof m?t.onFullscreen.emit(e):e instanceof O?t.onGeometryLoaded.emit(e):e instanceof b?t.onHide.emit(e):e instanceof I?t.onIsolate.emit(e):e instanceof x?t.onObjectTreeCreated.emit(e):e instanceof G?t.onObjectTreeUnavailable.emit(e):e instanceof z?t.onReset.emit(e):e instanceof Y?t.onSelectionChanged.emit(e):e instanceof q&&t.onShow.emit(e)})},t.prototype.unregisterBasicExtension=function(){ne.unregisterExtension(ne.extensionName),this.basicExt=null},t.prototype.addBasicExtensionConfig=function(e){var t=Object.assign({},this.viewerOptions.viewerConfig,{extensions:[]});return this.viewerOptions.viewerConfig&&this.viewerOptions.viewerConfig.extensions?t.extensions=this.viewerOptions.viewerConfig.extensions.concat([e]):t.extensions=[e],t},t.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showDebugMessages&&console.log(e,t)},t.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showDebugMessages&&console.error(e,t)},t.decorators=[{type:i.Component,args:[{selector:"adsk-forge-viewer",template:'<div id="ng2-adsk-forge-viewer-container"></div> ',styles:["@import url('https://developer.api.autodesk.com/modelderivative/v2/viewers/style.min.css?v=6.5.*'); "],changeDetection:i.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:ie}]},t.propDecorators={onDocumentChanged:[{type:i.Output}],onItemLoaded:[{type:i.Output}],onError:[{type:i.Output}],onFitToView:[{type:i.Output}],onFullscreen:[{type:i.Output}],onGeometryLoaded:[{type:i.Output}],onHide:[{type:i.Output}],onIsolate:[{type:i.Output}],onObjectTreeCreated:[{type:i.Output}],onObjectTreeUnavailable:[{type:i.Output}],onReset:[{type:i.Output}],onSelectionChanged:[{type:i.Output}],onShow:[{type:i.Output}],showDebugMessages:[{type:i.Input}],viewerOptions:[{type:i.Input}]},t}(),ue=function(){function e(e,t){this.http=e,this.sanitizer=t}return e.prototype.ngOnChanges=function(){this.thumbnailOptions&&(this.setImageSrc(this.thumbnailOptions.defaultImageSrc),this.getThumbnail(this.thumbnailOptions.documentId))},e.prototype.getThumbnail=function(e){var t=this,n="https://developer.api.autodesk.com/modelderivative/v2/designdata/"+e+"/thumbnail",i="";this.thumbnailOptions.width&&(i+="width="+this.thumbnailOptions.width+"&"),this.thumbnailOptions.height&&(i+="height="+this.thumbnailOptions.height+"&"),i&&(n+="?"+i.slice(0,-1)),this.thumbnailOptions.getAccessToken(this.setAccessToken.bind(this));var r={Authorization:"Bearer "+this.token,"Content-Type":"image/png"};this.http.get(n,{headers:r,responseType:"arraybuffer"}).subscribe(function(e){return e?t.setImageSrc("data:image/png;base64,"+t.toBase64(e)):t.setImageSrc()},function(e){return t.setImageSrc()})},e.prototype.setAccessToken=function(e,t){this.token=e,this.expire=t},e.prototype.toBase64=function(e){return btoa(String.fromCharCode.apply(String,new Uint8Array(e)))},e.prototype.setImageSrc=function(e){void 0===e&&(e="");var t="";t=e||(this.thumbnailOptions&&this.thumbnailOptions.defaultImageSrc||""),this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(t)},e.decorators=[{type:i.Component,args:[{selector:"adsk-forge-thumbnail",template:'<img [src]="imageSrc" /> '}]}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:a.DomSanitizer}]},e.propDecorators={thumbnailOptions:[{type:i.Input}]},e}(),ae=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[se,ue],imports:[o.HttpClientModule],exports:[se,ue],providers:[ie]}]}],e.ctorParameters=function(){return[]},e}();e.BasicExtension=ne,e.ScriptService=ie,e.ViewerModule=ae,e.ViewerEventArgs=l,e.AggregationSelectionChangedEventArgs=h,e.AnimationReadyEventArgs=d,e.CameraChangedEventArgs=g,e.CutplanesChangedEventArgs=A,e.EscapeEventArgs=v,e.ExplodeChangedEventArgs=f,e.ExtensionLoadedUnloadedEventArgs=y,e.ExtensionLoadedEventArgs=T,e.ExtensionUnloadedEventArgs=w,e.FinalFrameRenderedChangedEventArgs=V,e.FitToViewEventArgs=_,e.FragmentsLoadedEventArgs=N,e.FullscreenEventArgs=m,e.GeometryLoadedEventArgs=O,e.HideEventArgs=b,e.HyperlinkEventArgs=k,e.IsolateEventArgs=I,e.LayerVisibilityEventArgs=D,e.LoadMissingGeometryEventArgs=S,e.ModelRootLoadedEventArgs=R,e.ModelUnloadedEventArgs=L,e.NavigationModeChangedEventArgs=C,e.ObjectTreeEventArgs=M,e.ObjectTreeCreatedEventArgs=x,e.ObjectTreeUnavailableEventArgs=G,e.PrefEventArgs=P,e.PrefChangedEventArgs=j,e.PrefResetEventArgs=F,e.ProgressUpdateEventArgs=H,e.RenderOptionChangedEventArgs=U,e.RenderPresentedEventArgs=B,e.ResetEventArgs=z,e.RestoreDefaultSettingsEventArgs=W,e.SelectionChangedEventArgs=Y,e.ShowEventArgs=q,e.TexturesLoadedEventArgs=X,e.ToolChangedEventArgs=J,e.ViewerInitializedEventArgs=Z,e.ViewerResizeEventArgs=K,e.ViewerStateRestoredEventArgs=Q,e.ViewerUnInitializedEventArgs=$,e.Extension=ee,e.ViewerComponent=se,e.ThumbnailComponent=ue,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-adsk-forge-viewer.umd.min.js.map
